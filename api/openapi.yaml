openapi: 3.0.0
info:
  description: This is Debugging API document.
  version: 1.0.0
  title: Debugging REST API
  contact:
    name: Dasol Kim
    email: sorikiki98@naver.com
servers:
  - url: 'http://localhost:8080'
tags:
  - name: user
    description: Methods to access and manage users
  - name: bugs
    description: Methods to access bug information and add a survey result
  - name: companies
    description: Methods to access company information and manage company interests and reservation
  - name: products
    description: Methods to access product information and manage product interests
paths:
  /user/signup:
    post:
      tags:
        - user
      summary: Signs up a user to the Debugging service
      description: Creates a user account for the given user details.
      operationId: signup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
        required: true
      responses:
        '201':
          description: Account Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserAuthenticationSuccess'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
        '409':
          description: User already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'

  /user/login:
    post:
      tags:
        - user
      summary: Logs in a user to the Debugging service
      description: Verify if a logged-in user is valid or not.
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
        required: true
      responses:
        '200':
          description: Login Succeeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLogin'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
  /user:
    delete:
      tags:
        - user
      summary: Remove a logged-in user from the Debugging data system
      description: Remove a current user from the User database.
      operationId: remove
      responses:
        '204':
          description: Signout Succeeded
  /user/mypage:
    get:
      tags:
        - user
      summary: Fetch user-related information in mypage
      description: This includes both user-generated information and current status about application usages.
      operationId: getUserDetails
      responses:
        '200':
          description: User Information Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
  /companies:
    get:
      tags:
        - companies
      operationId: getCompanies
      responses:
        '200':
          description: Companies' Information Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompaniesList'
  /companies/interest/{company_id}:
    post:
      tags:
        - companies
      summary: Add a company into a user's company interest list
      description: Add one item into a scheme called CompanyInterest using id of both current user and chosed company.
      operationId: addCompanyInterest
      parameters:
        - name: company_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '201':
          description: Company Interest Item Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyInformation'

        '409':
          description: Already Added With Same User and Company
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
    delete:
      tags:
        - companies
      summary: Remove a company from a user's company interest list
      description: Remove one item into a scheme called CompanyInterest using id of both current user and chosed company.
      operationId: removeCompanyInterest
      parameters:
        - name: company_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Company Interest Item Deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyInformation'

        '404':
          description: Unexisted Company Interest Item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
  /companies/reservation/{company_id}:
    post:
      tags:
        - companies
      summary: Make a reservation to the Debugging service
      description: Make a reservation using id of both current user and chosed company.
      operationId: bookCompany
      parameters:
        - name: company_id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReservationApplication'
        required: true
      responses:
        '201':
          description: New Reservation Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReservationDetail'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
  /bugs:
    get:
      tags:
        - bugs
      summary: Fetch all of bugs' information
      description: Show a bunch of information about each bug which is easily found in the house.
      operationId: getBugs
      responses:
        '200':
          description: Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BugsList'
  /bugs/{bug_id}:
    get:
      tags:
        - bugs
      summary: Fetch only one bug's information
      description: Show information about a chosen bug
      operationId: getBug
      parameters:
        - name: bug_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BugInformation'
  /bugs/survey/{bug_id}:
    post:
      tags:
        - bugs
      summary: Add a survey result showing a specific bug information
      description: Add one survey item with an inferred bug based on the survey result.
      operationId: survey
      parameters:
        - name: bug_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '201':
          description: Survey Result Created
  /products:
    get:
      tags:
        - products
      summary: Fetch all of products' information
      description: Show a bunch of information about each product which is available in the website.
      operationId: getProducts
      responses:
        '200':
          description: Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductsList'
  /product/{product_id}:
    get:
      tags:
        - products
      summary: Fetch only one product's information
      description: Show information about a chosen product
      operationId: getProduct
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successfully Fetched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductInformation'
  /products/interest/{product_id}:
    post:
      tags:
        - products
      summary: Add a product into a user's product interest list
      description: Add one item into a scheme called ProductInterest using id of both current user and chosed product.
      operationId: addProductInterest
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '201':
          description: Product Interest Item Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductInformation'

        '409':
          description: Already Added With Same User and Product
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
    delete:
      tags:
        - products
      summary: Remove a product from a user's product interest list
      description: Remove one item into a scheme called ProductInterest using id of both current user and chosed product.
      operationId: removeProductInterest
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Product Interest Item Deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductInformation'

        '404':
          description: Unexisted Product Interest Item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
components:
  schemas:
    UserRegistration:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
          format: password
          minLength: 5
        name:
          type: string
        contactNumbers:
          type: string
        email:
          type: string
          format: email
        address:
          type: string
          nullable: true
        sizeOfHouse:
          type: number 
          nullable: true
        numOfRooms:
          type: integer
          nullable: true
      required:
        - username
        - password
        - name
        - contactNumbers
        - email
      example:
        username: ê¹€ë‹¤ì†”
        password: abc1234
        name: Dasol Kim
        contactNumbers: 010-1111-2222
        email: sorikiki98@sookmyung.ac.kr
    UserAuthenticationSuccess:
      type: object
      properties:
        token:
          type: string
        username:
          type: string
      required:
        - token
        - username
      example:
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
        username: ê¹€ë‹¤ì†”
    UserLogin:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
          format: password
          minLength: 5
      required:
        - username
        - password
      example:
        username: ê¹€ë‹¤ì†”
        password: abc1234
    UserDetail:
      type: object
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        password:
          type: string
          format: password
          minLength: 5
        name:
          type: string
        contactNumbers:
          type: string
        email:
          type: string
          format: email
        address:
          type: string
          nullable: true
        sizeOfHouse:
          type: number
          nullable: true
        numOfRooms:
          type: integer
          nullable: true
        accumulatedNumOfUsages:
          type: integer
          nullable: true
          default: 0
        numOfInterestedCompanies:
          type: integer
          nullable: true
          default: 0
        surveyList:
          type: array
          items:
            type: object
            properties:
              bugId:
                type: integer
                format: int64
              bugName:
                type: string
              surveyDate:
                type: string
                format: date
            required:
              - surveyDate
              - bugName
        productList:
          type: array
          items:
            type: object
            properties:
              productId:
                type: integer
                format: int64
              productName:
                type: string
            required:
              - productId
                productName
        reservationList:
          type: array
          items:
            type: object
            properties:
              reservationId:
                type: integer
                format: int64
              companyName:
                type: string
              processState:
                type: integer
                nullable: true
                default: 1
            required:
              - reservationId
              - companyName
              - processState
      required:
        - id
        - username
        - password
        - name
        - contactNumbers
        - email
        - accumulatedNumOfUsages
        - numOfInterestedCompanies
        - surveyList
        - productList
        - reservationList
      example:
        id: 19
        username: ê¹€ë‹¤ì†”
        password: abc1234
        name: Dasol Kim
        contactNumbers: 010-1111-2222
        email: sorikiki98@sookmyung.ac.kr
        address: ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬ ì²­íŒŒë¡œ
        sizeOfHouse: 10
        numOfRooms: 2
        accumulatedNumOfUsages: 3
        numOfInterestedCompanies: 4
        surveyList:
          - bugId: 8
            bugName: ëª¨ê¸°
            surveyDate: '2022-05-01'
          - bugId: 1
            bugName: ë°”í€´ë²Œë ˆ
            surveyDate: '2022-05-01'
        productList:
          - productId: 1
            productName: í™ˆë§¤íŠ¸ ì œë¡œ ë¦¬í€´ë“œ
          - productId: 2
            productName: ì°¨ë‹ˆíŒ¡ ëª¨ê¸°ì¥
        reservationList:
          - reservationId: 2
            companyName: í•´ì¶©ë§ˆìŠ¤í„°
            processState: 1
    CompanyInformation:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
          maxLength: 12
        shortIntro:
          type: string
          maxLength: 30
        description:
          type: string
        contactNumbers:
          type: string
        killableBugs:
          type: string
        availableArea:
          type: string
        availableCounselTime:
          type: string
        thumbnail:
          type: string
          format: url
          nullable: true
        isCompanyInterested:
          type: boolean
          nullable: true
          default: false
      required:
        - id
        - name
        - shortIntro
        - description
        - contactNumbers
        - killableBugs
        - availableArea
        - availableCounselTime
      example:
        id: 1
        name: ì˜¬í‚¬ë°©ì—­
        shortIntro: í•´ì¶©ê³¼ ë°”ì´ëŸ¬ìŠ¤ í‡´ì¹˜ ë°©ì—­íšŒì‚¬ ì¹¨ëŒ€ ì‚´ê·  ì†Œë…ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        description: ì—¬ëŸ¬ë¶„ë“¤ì˜ ë³´ê¸ˆìë¦¬ì™€ ì¼í„°ì—ì„œ ì‹¬ì‹¬ì¹˜ ì•Šê²Œ ë‚˜íƒ€ë‚˜ëŠ” í•´ì¶©! í˜ì˜¤ê°ì€ ë¬¼ë¡  ìœ„ìƒê³¼ ê±´ê°•ì— ì¹˜ëª…ì ì¸ í•´ë¥¼ ì…í™ë‹ˆë‹¤. (ì£¼)ì˜¬í‚¬ì€ í•œêµ­ë°©ì—­í˜‘íšŒ ì •íšŒì›ìœ¼ë¡œ ë“±ë¡ëœ ìµœê³ ì˜ ìê²©ì„ ê°–ì¶˜ ì—…ì²´ë¡œì„œ ì²´ê³„ì ì´ê³  ì „ë¬¸í™”ëœ ë°©ì—­ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.
        contactNumbers: 1899-1407
        killableBugs: ë°”í€´ë²Œë ˆ, ê°œë¯¸
        availableArea: ì „êµ­ ê°€ëŠ¥
        availableCounselTime: 24ì‹œê°„ ê³ ê°ì„¼í„° ìƒë‹´ ê°€ëŠ¥
        thumbnail: https://modo-phinf.pstatic.net/20210202_220/1612260614570k31DQ_JPEG/mosae0YPBy.jpeg?type=w720
        isCompanyInterested: true
    CompaniesList:
      type: array
      items:
        $ref: '#/components/schemas/CompanyInformation'
    ReservationApplication:
      type: object
      properties:
        bugName:
          type: string
        firstFoundDate:
          type: string
          format: date
        firstFoundPlace:
          type: string
        wantedDate:
          type: string
        wantedTime:
          type: string
        hasBugBeenShown:
          type: boolean
        reserveDateTime:
          type: string
          format: date-time
        extraMessage:
          type: string
          nullable: true
      required:
        - bugName
        - firstFoundDate
        - firstFoundPlace
        - wantedDate
        - wantedTime
        - hasBugBeenShown
        - reserveDateTime
      example:
        bugName: ë°”í€´ë²Œë ˆ
        firstFoundDate: '2022-05-04'
        firstFoundPlace: í™”ì¥ì‹¤ ë³€ê¸° ì˜†
        wantedDate: 2022-05-12~2022-05-19
        wantedTime: ì˜¤í›„ 4ì‹œ~ ì˜¤í›„ 6ì‹œ
        hasBugBeenShown: false
        reserveDateTime: '2022-05-10'
    ReservationDetail:
      type: object
      properties:
        id:
          type: integer
          format: int64
        bugName:
          type: string
        firstFoundDate:
          type: string
          format: date
        firstFoundPlace:
          type: string
        wantedDate:
          type: string
        wantedTime:
          type: string
        hasBugBeenShown:
          type: boolean
        reserveDateTime:
          type: string
          format: date-time
        extraMessage:
          type: string
          nullable: true
        userId:
          type: integer
          format: int64
        userName:
          type: string
        userContactNumbers:
          type: string
        userEmail:
          type: string
          format: email
        userAddress:
          type: string
          nullable: true
        sizeOfHouse:
          type: number
          nullable: true
        numOfRooms:
          type: integer
          nullable: true
        companyId:
          type: integer
          format: int64
        companyName:
          type: string
          maxLength: 12
        shortIntro:
          type: string
          maxLength: 30
        description:
          type: string
        companyContactNumbers:
          type: string
        killableBugs:
          type: string
        availableArea:
          type: string
        availableCounselTime:
          type: string
        thumbnail:
          type: string
          format: url
          nullable: true
      required:
        - id
        - bugName
        - firstFoundDate
        - firstFoundPlace
        - wantedDate
        - wantedTime
        - hasBugBeenShown
        - reserveDateTime
        - userId
        - userName
        - userContactNumbers
        - userEmail
        - userAddress
        - companyId
        - companyName
        - shortIntro
        - description
        - companyContactNumbers
        - killableBugs
        - availableArea
        - availableCounselTime
      example:
        id: 1
        bugName: ë°”í€´ë²Œë ˆ
        firstFoundDate: '2022-05-04'
        firstFoundPlace: í™”ì¥ì‹¤ ë³€ê¸° ì˜†
        wantedDate: 2022-05-12~2022-05-19
        wantedTime: ì˜¤í›„ 4ì‹œ~ ì˜¤í›„ 6ì‹œ
        hasBugBeenShown: false
        reserveDateTime: '2022-05-10'
        userId: 1
        userName: ê¹€ë‹¤ì†”
        userContactNumbers: 010-1111-2222
        userEmail: sorikiki98@sookmyung.ac.kr
        userAddress: ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬ ì²­íŒŒë¡œ
        companyId: 2
        companyName: í•´ì¶©ë§ˆìŠ¤í„°
        shortIntro: ë°”í€´ë²Œë ˆ, ì¢€ë²Œë ˆ ë“± í•´ì¶©ë°©ì—­ ì „ë¬¸ ì—…ì²´ì…ë‹ˆë‹¤. ìˆ˜ë„ê¶Œë§Œ ì¶œì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        description: í•´ì¶©ë§ˆìŠ¤í„°ëŠ” ìš°ë¦¬ ì¸ê°„ì—ê²Œ ìœ í•´í•œ í•´ì¶©ì„ ì§„ë‹¨, í‡´ì¹˜í•˜ëŠ”"ì¹œí™˜ê²½ ê·¸ë¦° ì¹˜ë£Œì†Œ"ì…ë‹ˆë‹¤. ëª¨ë“  ìƒí™©ì— ë§ì¶”ì–´ ì‹ì•½í—ˆê°€í•´ì¶©í‡´ì¹˜ì œë¥¼ ë³´ë‹¤ ê°•ë ¥í•˜ê³ , ì•ˆì „í•˜ë©° ì¹œí™˜ê²½ì ì¸ ì œí’ˆìœ¼ë¡œ ë§ì¶”ì–´ ê°œë°œ, ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
        companyContactNumbers: 1800-3055
        killableBugs: ë°”í€´ë²Œë ˆ, ëª¨ê¸°, ì¢€ë²Œë ˆ
        availableArea: ì„œìš¸, ê²½ê¸°, ì¸ì²œ, ì¶©ì²­ë¶ë„
        availableCounselTime: 24ì‹œê°„ ê³ ê°ì„¼í„° ìƒë‹´ ê°€ëŠ¥
        thumbnail: http://www.hcmaster.com/images/common/top_logo.gif
    BugInformation:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        appearance:
          type: string
        movement:
          type: string
        habitat:
          type: string
        color:
          type: string
        surveyResult:
          type: string
      required:
        - id
        - name
        - appearance
        - movement
        - habitat
        - color
        - surveyResult
      example:
        id: 1
        name: ì¢€ë²Œë ˆ
        appearance: ìœ ì„ í˜• / ê¸¸ì­‰í•¨ / ë‚©ì‘í•¨ / ê¸´ë”ë“¬ì´ /ë‚ ê°œì—†ìŒ /ë‹¤ë¦¬ë§ìŒ
        movement: ê¸°ì–´ë‹¤ë‹˜ / ë§¤ìš°ë¹ ë¦„
        habitat: ì–´ë‘ìš´ê³³ / ìŠµí•œê³³ / ë”°ëœ»í•œê³³ /ì˜¤ë˜ëœì±… / í™”ì¥ì‹¤
        color: ë°±ìƒ‰ / ì€ìƒ‰ /ì˜…ì€í™©ìƒ‰
        surveyResult: í°ìƒ‰ ë˜ëŠ” ì€ìƒ‰ì´ì—ìš” / ì•¼í–‰ì„±ì´ë¼ ë°¤ì— ì£¼ë¡œ í™œë™í•´ìš” /ë§¤ìš° ë¹ ë¥´ê²Œ ì›€ì§ì—¬ìš” / í¬ê¸°ê°€ ì‘ì•„ ë‹¤ë¦¬ê°€ ì˜ ë³´ì´ì§€ ì•Šì•„ìš” / ë”ë“¬ì´ê°€ 3ê°œ ìˆëŠ” ì• ë²Œë ˆì²˜ëŸ¼ ë³´ì—¬ìš”
    BugsList:
      type: array
      items:
        $ref: '#/components/schemas/BugInformation'
    ProductInformation:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        type:
          type: string
        shortIntro:
          type: string
          maxLength: 30
        description:
          type: string
        thumbnail:
          type: string
          format: url
          nullable: true
        isProductInterested:
          type: boolean
          nullable: true
          default: false
      required:
        - id
        - name
        - type
        - shortIntro
        - description
      example:
        id: 1
        name: í™ˆë§¤íŠ¸ ì œë¡œ ë¦¬í€´ë“œ
        type: í™”í•™ì•½í’ˆ
        shortIntro: ê±±ì •ì œë¡œ ì•ˆì‹¬ ë³´í˜¸ë§‰ìœ¼ë¡œ ë§ˆìŒì€ í¸ì•ˆí•˜ê²Œ, íš¨ê³¼ëŠ” í™•ì‹¤í•˜ê²Œ
        description: ì‰½ê³  ê°„í¸í•œ ì˜¨/ì˜¤í”„ ìŠ¤ìœ„ì¹˜ íƒ€ì… + NEW ì»´íŒ©íŠ¸í•œ ë””ìì¸ + í¸ì•ˆí•œ LEDì¡°ëª… + íš¨ê³¼ì ì¸ ì‚´ì¶©ë ¥ê¹Œì§€!
        thumbnail: https://cdn.011st.com/11dims/resize/600x600/quality/75/11src/pd/21/2/1/7/9/3/4/pyNlM/3534217934_B.jpg
        isProductInterested: true
    ProductsList:
      type: array
      items:
        $ref: '#/components/schemas/ProductInformation'
    ErrorApiResponse:
      type: object
      properties:
        message:
          type: string
      required:
        - message
      example:
        message: 'Something went wrong. ğŸ˜…'
